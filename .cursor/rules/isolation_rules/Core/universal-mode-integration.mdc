---
description: "Always apply this rule to enable UNIVERSAL mode with seamless transitions between all Memory Bank phases. Provides automatic workflow progression VAN‚ÜíPLAN‚ÜíCREATIVE‚ÜíIMPLEMENT‚ÜíREFLECT‚ÜíARCHIVE without user intervention."
globs: "**/**"
alwaysApply: true
---

# UNIVERSAL MODE INTEGRATION SYSTEM

> **TL;DR:** UNIVERSAL mode combines all Memory Bank modes into a unified workflow with automatic transitions VAN‚ÜíPLAN‚ÜíCREATIVE‚ÜíIMPLEMENT‚ÜíREFLECT‚ÜíARCHIVE without stops for user selection.

## üåê –ü–†–ò–ù–¶–ò–ü–´ UNIVERSAL –†–ï–ñ–ò–ú–ê

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
**–ë–µ—Å—à–æ–≤–Ω—ã–π workflow**
- VAN: –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ PLAN
- PLAN: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ CREATIVE
- CREATIVE: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –≤ IMPLEMENT
- IMPLEMENT: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π REFLECT
- REFLECT: –ê–Ω–∞–ª–∏–∑ ‚Üí ARCHIVE –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

### –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞–∑**
- –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–∑—ã
- –ü—Ä–æ–ø—É—Å–∫ –Ω–µ–Ω—É–∂–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ CREATIVE –ø—Ä–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö
- QA —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

## üîÑ UNIVERSAL WORKFLOW

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
```bash
# –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª UNIVERSAL —Ä–µ–∂–∏–º–∞
universal_mode_cycle() {
  echo "üåê –ó–ê–ü–£–°–ö UNIVERSAL –†–ï–ñ–ò–ú–ê"
  echo "========================"

  # –§–∞–∑–∞ 1: VAN - –ê–Ω–∞–ª–∏–∑
  local van_result=$(execute_van_phase)

  # –§–∞–∑–∞ 2: PLAN - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
  if needs_planning "$van_result"; then
    local plan_result=$(execute_plan_phase "$van_result")
  fi

  # –§–∞–∑–∞ 3: CREATIVE - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
  if needs_creative_decisions "$plan_result"; then
    local creative_result=$(execute_creative_phase "$plan_result")
  fi

  # –§–∞–∑–∞ 4: IMPLEMENT - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
  local implement_result=$(execute_implement_phase "${creative_result:-$plan_result}")

  # –§–∞–∑–∞ 5: REFLECT - –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  local reflect_result=$(execute_reflect_phase "$implement_result")

  # –§–∞–∑–∞ 6: ARCHIVE - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞)
  if task_completed "$reflect_result"; then
    execute_archive_phase "$reflect_result"
  fi
}
```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ñ–∞–∑
```bash
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
needs_planning() {
  local van_result="$1"

  # –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ VAN —Ñ–∞–∑—ã
  if echo "$van_result" | grep -qi "—Å–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞\|–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞\|–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"; then
    return 0  # –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
  fi

  return 1    # –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
}

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
needs_creative_decisions() {
  local plan_result="$1"

  if echo "$plan_result" | grep -qi "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ\|–¥–∏–∑–∞–π–Ω\|–≤—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"; then
    return 0  # CREATIVE —Ñ–∞–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞
  fi

  return 1    # –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
}
```

## ü§ñ QA –°–ò–°–¢–ï–ú–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
```bash
# –û–±—Ä–∞–±–æ—Ç–∫–∞ QA –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ UNIVERSAL —Ä–µ–∂–∏–º–µ
handle_qa_interrupt() {
  local user_question="$1"
  local current_phase="$2"
  local main_task_context="$3"

  echo "‚ùì QA –ü–†–ï–†–´–í–ê–ù–ò–ï –í UNIVERSAL –†–ï–ñ–ò–ú–ï"
  echo "================================="
  echo "üìã –¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞: $current_phase"
  echo "‚ùì –í–æ–ø—Ä–æ—Å: $user_question"

  # –ê–Ω–∞–ª–∏–∑ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
  local urgency=$(analyze_question_urgency "$user_question")

  if [ "$urgency" = "urgent" ]; then
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    save_current_context "$current_phase" "$main_task_context"
    process_urgent_qa "$user_question"
  else
    # –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã
    schedule_qa_processing "$user_question" "$current_phase"
  fi
}
```

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π UNIVERSAL —Ä–µ–∂–∏–º –¥–ª—è Memory Bank —Å –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏.